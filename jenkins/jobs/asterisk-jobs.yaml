- job-template:
    name: 'check-{name}'
    node: 'centos || debian'

    wrappers:
        - timeout:
            timeout: 60
            timeout-var: 'BUILD_TIMEOUT'
            fail: true
        - timestamps

    builders:
        - node-git-prep
        - gerrit-git-prep
        - build-asterisk
        - run-asterisk-unittests


- job-template:
    name: 'gate-{name}'
    node: 'centos || debian'

    wrappers:
        - timeout:
            timeout: 60
            timeout-var: 'BUILD_TIMEOUT'
            fail: true
        - timestamps

    builders:
        - node-git-prep
        - gerrit-git-prep
        - build-asterisk
        - run-asterisk-unittests

    publishers:
        - archive:
            artifacts: 'asterisk/test-reports/*'

- job-group:
    name: asterisk-jobs
    jobs:
        - 'check-{name}'
        - 'gate-{name}'

